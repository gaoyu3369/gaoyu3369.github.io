{"title":"C#实现Unity3D中的Text组件打字机效果","slug":"C-实现Unity3D中的Text组件打字机效果","date":"2020-06-29T01:25:13.000Z","updated":"2020-06-29T02:28:58.181Z","comments":true,"path":"api/articles/C-实现Unity3D中的Text组件打字机效果.json","photos":[],"link":"","excerpt":"实现Text组件一个字一个字显示的打字机效果是非常常见且经常容易遇见的题目，这个效果的实现方法多种多样，记录一下我个人常用的一个相对简单的方法。大体的思路，主要是以下几点：获取物体的Text组件保存Text组件内的文字通过保存的文字用Substring方法实时刷新Text组件内的文字来实现打字机效果","covers":null,"content":"<p>实现Text组件一个字一个字显示的打字机效果是非常常见且经常容易遇见的题目，这个效果的实现方法多种多样，记录一下我个人常用的一个相对简单的方法。</p>\n<p>大体的思路，主要是以下几点：</p>\n<ol>\n<li>获取物体的Text组件</li>\n<li>保存Text组件内的文字</li>\n<li>通过保存的文字用Substring方法实时刷新Text组件内的文字来实现打字机效果</li>\n</ol>\n<a id=\"more\"></a>\n\n<p>具体实现代码：</p>\n<figure class=\"highlight cs\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title\">PrintWords</span> : <span class=\"title\">MonoBehaviour</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Text myText;\t<span class=\"comment\">//用来接收物体的Text组件</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">string</span> words;\t<span class=\"comment\">//用来保存Text组件内的文字</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">float</span> perCharSeconds = <span class=\"number\">0.15f</span>;\t<span class=\"comment\">//设定每个文字出现的间隔</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> timer;\t<span class=\"comment\">//计时器</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">float</span> currentPos = <span class=\"number\">0</span>;\t<span class=\"comment\">//记录当前打印文字的位置</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">bool</span> isActive = <span class=\"literal\">false</span>;\t<span class=\"comment\">//控制打字机的开关</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Start</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        isActive = <span class=\"literal\">true</span>;\t<span class=\"comment\">//开启打字机</span></span><br><span class=\"line\">        myText = <span class=\"keyword\">this</span>.GetComponent&lt;Text&gt;();\t<span class=\"comment\">//获取物体的Text组件</span></span><br><span class=\"line\">        words = myText.text;\t\t<span class=\"comment\">//保存Text组件里的文字</span></span><br><span class=\"line\">        myText.text = <span class=\"string\">\"\"</span>;\t<span class=\"comment\">//清空打字机里的文字(如果要实现打字机的效果肯定一开始文字就是空的，然后才能一个一个字显现)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Update</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        OnStartPrint();\t<span class=\"comment\">//执行打字机方法</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">OnStartPrint</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isActive)&#123;</span><br><span class=\"line\">            timer += Time.deltaTime;\t<span class=\"comment\">//开启计时器</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(timer &gt;= perCharSeconds)&#123;\t<span class=\"comment\">//如果设定的间隔时间到了</span></span><br><span class=\"line\">                timer = <span class=\"number\">0</span>;\t<span class=\"comment\">//计时器归零</span></span><br><span class=\"line\">                currentPos++;\t<span class=\"comment\">//文字往后移一位</span></span><br><span class=\"line\">               \tmyText.text = words.Substring(<span class=\"number\">0</span>,currentPos);\t<span class=\"comment\">//利用Substring添加文字内容</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(currentPos &gt;= words.Length)&#123;\t<span class=\"comment\">//判断文字是否打完</span></span><br><span class=\"line\">                OnFinsh();\t<span class=\"comment\">//执行收尾方法</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">OnFinsh</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">        isActive = <span class=\"literal\">false</span>;</span><br><span class=\"line\">        timer = <span class=\"number\">0</span>;</span><br><span class=\"line\">        currentPos = <span class=\"number\">0</span>;</span><br><span class=\"line\">        myText = words;\t\t<span class=\"comment\">//将保存的文字赋回给物体的Text组件</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<hr>\n<h3 id=\"版权所有，转载请注明地址\"><a href=\"#版权所有，转载请注明地址\" class=\"headerlink\" title=\"版权所有，转载请注明地址\"></a>版权所有，转载请注明地址</h3><p>本文为「&copy;柑茶」原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。</p>\n","categories":[{"name":"C#","slug":"C","count":6,"path":"api/categories/C.json"}],"tags":[{"name":"Unity3D","slug":"Unity3D","count":7,"path":"api/tags/Unity3D.json"},{"name":"C#","slug":"C","count":5,"path":"api/tags/C.json"}]}